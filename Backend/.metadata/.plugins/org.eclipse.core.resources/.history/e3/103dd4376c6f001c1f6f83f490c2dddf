package com.coforge.training.airline.controller;

import static org.junit.jupiter.api.Assertions.*;
import static org.mockito.Mockito.times;
import static org.mockito.Mockito.verify;
import static org.mockito.Mockito.when;

import java.util.ArrayList;
import java.util.List;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;

import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.BeforeAll;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.mockito.Mock;
import org.mockito.MockitoAnnotations;
import org.mockito.Spy;
import org.springframework.ui.Model;

import com.coforge.training.airline.model.AirPort;
import com.coforge.training.airline.repository.AirPortRepo;
import com.coforge.training.airline.service.AirportService;

class AirPortControllerTest {

	AirPort a1= new AirPort();

	@Mock
	private AirportService  service;

	@Mock
	private  AirPortRepo repo;


	@Spy
	private Model model;

	@Spy
	List<AirPort> airport = new ArrayList<AirPort>();

	@Spy
	HttpServletRequest req;

	@Spy
	HttpSession ses;

	@BeforeEach
	public void init() {
		MockitoAnnotations.openMocks(this);
		airport=getAirPortList();
	}

	private List<AirPort> getAirPortList() {
		AirPort a = new AirPort();
		a.setAirportid(1);
		a.setAirportname("Jamini");
		a.setAirportcountry("Japan");
		a.setAirportcity("Karm");
		a.setAirportphoneno("213445566");
		a.setAirportpincode("211134");
		a.setAdminemail("admin@gmail.com");
		List<AirPort> res = new ArrayList<AirPort>();
		res.add(a);
		return res;
	}

	@Test
	void testSaveAirport() {
		fail("Not yet implemented");
	}

	@Test
	void testGetAirportById() {
		AirPort res=new AirPort();
		res.setAirportid(airport.get(0).getAirportid() );
		res.setAirportname(airport.get(0).getAirportname());
		res.setAirportcountry(airport.get(0).getAirportcountry());
		res.setAirportcity(airport.get(0).getAirportcity());
		res.setAirportphoneno(airport.get(0).getAirportphoneno());
		res.setAirportpincode(airport.get(0).getAirportpincode());
		res.setAdminemail(airport.get(0).getAdminemail());

		when(service.getAirPortById(airport.get(0).getAirportid())).thenReturn(res);
		

		AirPort addc=service.getAirPortById(airport.get(0).getAirportid());
		//FlightCompany addc=service.getCompanyById(fCompany.get(0).get);

		assertNotNull(addc.getAirportid());
		assertEquals(addc, res);

		verify(service,times(1)).getAirPortById(airport.get(0).getAirportid());	
	}

	@Test
	void testGetAllAirPort() {
		List<AirPort> res=airport;
		when(service.getAllAirport()).thenReturn(res);
		res=service.getAllAirport();
		assertNotNull(res); //(assertnot null)=a passed parameter must not be null  for 
		verify(service,times(1)).getAllAirport();
	}

	@Test
	void testGetAirPortByEmail() {
		fail("Not yet implemented");
	}

	@Test
	void testUpdateAirport() {
		fail("Not yet implemented");
	}

	@Test
	void testDeleteAirport() {
		fail("Not yet implemented");
	}

}
